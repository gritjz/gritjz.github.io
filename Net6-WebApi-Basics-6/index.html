<!DOCTYPE html>
<html lang="en" color-mode="light">

  <head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="keywords" content="" />
  <meta name="author" content="Steven Zhang" />
  <meta name="description" content="" />
  
  
  <title>
    
      .Net 6 + WebApi Basics 6 - Database 
      
      
      |
    
     Steven&#39;s Blog
  </title>

  
    <link rel="apple-touch-icon" href="/images/favicon1.png">
    <link rel="icon" href="/images/favicon1.png">
  

  <!-- Raleway-Font -->
  <link href="https://fonts.googleapis.com/css?family=Raleway&display=swap" rel="stylesheet">

  <!-- hexo site css -->
  <link rel="stylesheet" href="/css/main.css" />
  <link rel="stylesheet" href="//at.alicdn.com/t/font_1886449_67xjft27j1l.css" />
  <!-- 代码块风格 -->
  

  <!-- jquery3.3.1 -->
  
    <script defer type="text/javascript" src="/plugins/jquery.min.js"></script>
  

  <!-- fancybox -->
  
    <link href="/plugins/jquery.fancybox.min.css" rel="stylesheet">
    <script defer type="text/javascript" src="/plugins/jquery.fancybox.min.js"></script>
  
  
<script src="/js/fancybox.js"></script>


  <!---->
    <!-- Global site tag (gtag.js) - Google Analytics -->
   <!-- <script async src="https://www.googletagmanager.com/gtag/js?id=G-4C6251J3NN"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-4C6251J3NN');
    </script>
   -->

  <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-4C6251J3NN"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-4C6251J3NN');
</script>

  
    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
  

  <script>
    var html = document.documentElement
    const colorMode = localStorage.getItem('color-mode')
    if (colorMode) {
      document.documentElement.setAttribute('color-mode', colorMode)
    }
  </script>
  
<meta name="generator" content="Hexo 6.3.0"></head>

<html>
  <body>
    <div class="tools-bar">
      
    </div>

  </body>
</html>


  <body>
    <div id="app">
      <div class="header">
  <div class="avatar">
    <a href="/">
      <!-- 头像取消懒加载，添加no-lazy -->
      
        <img src="/images/avatar1.png" alt="">
      
    </a>
    <div class="nickname"><a href="/">Steven Zhang</a></div>
  </div>
  <div class="navbar">
    <ul>
      
        <li class="nav-item" data-path="/">
          <a href="/">Home</a>
        </li>
      
        <li class="nav-item" data-path="/archives/">
          <a href="/archives/">Posts</a>
        </li>
      
        <li class="nav-item" data-path="/categories/">
          <a href="/categories/">Categories</a>
        </li>
      
        <li class="nav-item" data-path="/tags/">
          <a href="/tags/">Tags</a>
        </li>
      
        <li class="nav-item" data-path="/about/">
          <a href="/about/">Me</a>
        </li>
      
    </ul>
  </div>
</div>


<script src="/js/activeNav.js"></script>



      <div class="flex-container">
        <!-- 文章详情页，展示文章具体内容，url形式：https://yoursite/文章标题/ -->
<!-- 同时为「标签tag」，「朋友friend」，「分类categories」，「关于about」页面的承载页面，具体展示取决于page.type -->

  <!-- LaTex Display -->

  
    <script async type="text/javascript" src="/plugins/mathjax/tex-chtml.js"></script>
  
  <script>
    MathJax = {
      tex: {
        inlineMath: [['$', '$'], ['\\(', '\\)']]
      }
    }
  </script>


    
      
        <!-- clipboard -->

  
    <script async type="text/javascript" src="/plugins/clipboard.min.js"></script>
  
  
<script src="/js/codeCopy.js"></script>



          
            
                
                    
                        
                            
                              <!-- 文章内容页 url形式：https://yoursite/文章标题/ -->
                              <div class="container post-details" id="post-details">
                                <div class="post-content">
                                  <div class="post-title">.Net 6 + WebApi Basics 6 - Database</div>
                                  <div class="post-attach">
                                    <span class="post-pubtime">
                                      <i class="iconfont icon-updatetime mr-10" title="Update time"></i>
                                      2023-01-10 22:27:56
                                    </span>
                                     <span class="post-categories">
                                          <i class="iconfont icon-bookmark" title="Categories"></i>
                                          
                                            <span class="span--category">
                                              
                                                <a href="/categories/Net/" title=".Net">
                                                  &nbsp;.Net
                                                </a>
                                                
                                            </span>
                                            
                                            <span class="span--category">
                                              
                                                  <a href="/categories/Net/Net6/" title=".Net6">
                                                    &nbsp;<b>>>&nbsp;.Net6</b>
                                                  </a>
                                                  
                                            </span>
                                            
                                            <span class="span--category">
                                              
                                                  <a href="/categories/Net/Net6/WebApi/" title="WebApi">
                                                    &nbsp;<b>>>&nbsp;WebApi</b>
                                                  </a>
                                                  
                                            </span>
                                            
                                        </span>
                                         <span class="post-tags">
                                        <i class="iconfont icon-tags mr-10" title="Tags"></i>
                                        
                                          <span class="span--tag mr-8">
                                            <b><a href="/tags/C/" title="C#" style="color:Orange"> #C#
                                            </a></b>
                                          </span>
                                          
                                          <span class="span--tag mr-8">
                                            <b><a href="/tags/Net6/" title=".Net6" style="color:Orange"> #.Net6
                                            </a></b>
                                          </span>
                                          
                                          <span class="span--tag mr-8">
                                            <b><a href="/tags/WebApi/" title="WebApi" style="color:Orange"> #WebApi
                                            </a></b>
                                          </span>
                                          
                                          <span class="span--tag mr-8">
                                            <b><a href="/tags/SqlSugar/" title="SqlSugar" style="color:Orange"> #SqlSugar
                                            </a></b>
                                          </span>
                                          
                                          <span class="span--tag mr-8">
                                            <b><a href="/tags/Database/" title="Database" style="color:Orange"> #Database
                                            </a></b>
                                          </span>
                                          
                                      </span>
                                      
                                  </div>
                                  
                                  <div class="markdown-body">
                                    <h1 id="Use-SqlSugar-to-connect-with-DB"><a href="#Use-SqlSugar-to-connect-with-DB" class="headerlink" title="Use SqlSugar to connect with DB"></a>Use SqlSugar to connect with DB</h1><p>SQLSugar is relatively simple, less configuration, easy to get started, and more friendly to novices.</p>
<p><a href="https://www.donet5.com/Home/Doc">SQLSugar</a></p>
<p>Other ORM: <a href="https://learn.microsoft.com/en-us/aspnet/core/data/ef-mvc/intro?view=aspnetcore-7.0">EF Core</a>, <a href="https://learn.microsoft.com/en-us/dotnet/framework/data/adonet/">ADO.NET</a></p>
<h2 id="Insall-SqlSugarCore"><a href="#Insall-SqlSugarCore" class="headerlink" title="Insall SqlSugarCore"></a>Insall SqlSugarCore</h2><p>You can directly install SqlSugar in Nuget by searching <code>SqlSugarCore</code>.</p>
<h3 id="Dependency-Injection"><a href="#Dependency-Injection" class="headerlink" title="Dependency Injection"></a>Dependency Injection</h3><p>Use .NET IOC to launch.</p>
<p>Create a new class, named <code>SqlsugarSetup.cs</code>.</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title">SqlsugarSetup</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">AddSqlsugarSetup</span>(<span class="params"><span class="keyword">this</span> IServiceCollection services, IConfiguration configuration,</span></span></span><br><span class="line"><span class="params"><span class="function">        <span class="built_in">string</span> dbName = <span class="string">&quot;db_master&quot;</span></span>)</span></span><br><span class="line">        &#123;</span><br><span class="line">            SqlSugarScope sqlSugar = <span class="keyword">new</span> SqlSugarScope(<span class="keyword">new</span> ConnectionConfig()</span><br><span class="line">            &#123;</span><br><span class="line">                DbType = SqlSugar.DbType.SqlServer,</span><br><span class="line">                ConnectionString = configuration[dbName],</span><br><span class="line">                IsAutoCloseConnection = <span class="literal">true</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">                db =&gt;</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="comment">//Configure Singleton parameters</span></span><br><span class="line">                    db.Aop.OnLogExecuting = (sql, pars) =&gt;</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="comment">//Console.WriteLine(sql);//Output sql</span></span><br><span class="line">                    &#125;;</span><br><span class="line"></span><br><span class="line">                    <span class="comment">//services.GetService&lt;注入对象&gt;();</span></span><br><span class="line">                &#125;);</span><br><span class="line">            services.AddSingleton&lt;ISqlSugarClient&gt;(sqlSugar);<span class="comment">//SqlSugarScope uses AddSingleton</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p><code>string dbName = &quot;db_master&quot;</code> will get database’s connection string from <code>appsettings.json</code>.<br>The database name we use here is <code>SQLSUGAR4XTEST</code>。</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">&quot;db_master&quot;</span><span class="punctuation">:</span> <span class="string">&quot;server=localhost\\SQL_INSTANCE;uid=sa;pwd=aaa111;database=SQLSUGAR4XTEST&quot;</span></span><br></pre></td></tr></table></figure>

<p><code>DbType = SqlSugar.DbType.SqlServer</code> will configure database. We use <code>Microsoft SQL Server</code> here。<br><code>ConnectionString = configuration[dbName]</code> will acquire SqlServer’s <code>Connection String</code>。<br>Use <code>builder.Services</code> in <code>program.cs</code> to add <code>sqlsugar</code> service.</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">builder.Services.AddSqlsugarSetup(builder.Configuration);</span><br></pre></td></tr></table></figure>
<h1 id="CodeFirst"><a href="#CodeFirst" class="headerlink" title="CodeFirst"></a>CodeFirst</h1><blockquote>
<p>Code-First is mainly useful in Domain Driven Design. In the Code-First approach, you focus on the domain of your application and start creating classes for your domain entity rather than design your database first and then create the classes which match your database design. See <a href="https://www.entityframeworktutorial.net/code-first/what-is-code-first.aspx#:~:text=Code%2DFirst%20is%20mainly%20useful,which%20match%20your%20database%20design.">here</a>.</p>
</blockquote>
<p>As its name, <code>Code First</code>, first establish the entity structure to be mapped to the database in the code, and then generate the corresponding database according to the entity structure. Simply put, use code to manage database,rather than operating database system directly.</p>
<h2 id="Create-Database"><a href="#Create-Database" class="headerlink" title="Create Database"></a>Create Database</h2><p>Right-click and create a new <code>Controller</code> file, named <code>DbTestController</code>.</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">[<span class="meta">Route(<span class="string">&quot;api/[controller]&quot;</span>)</span>]</span><br><span class="line">    [<span class="meta">ApiController</span>]</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title">DbTestController</span> : <span class="title">ControllerBase</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">DbTestController</span>(<span class="params">ISqlSugarClient db</span>)</span></span><br><span class="line">        &#123;</span><br><span class="line">            Db = db;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">private</span> ISqlSugarClient Db &#123; <span class="keyword">get</span>; &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">        <span class="comment"><span class="doctag">///</span> Create the Database</span></span><br><span class="line">        <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">        <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;returns&gt;</span><span class="doctag">&lt;/returns&gt;</span></span></span><br><span class="line">        [<span class="meta">HttpPost</span>]</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="built_in">bool</span> <span class="title">CreateDb</span>()</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">return</span> Db.DbMaintenance.CreateDatabase();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><code>ISqlSugarClient</code> gets sqlsugar management parameters.<br><code>Db.DbMaintenance.CreateDatabase()</code> creates the database.</p>
<p><em><strong>Result</strong></em></p>
<p>Run project.</p>
<p>In Swagger page, a <code>DBTest</code> interface is added.</p>
<p><img src="/Net6-WebApi-Basics-6/05ba905984f97ac7d9517c1356142910.png" alt="DBTest"></p>
<p>Click <code>Try it out</code>–&gt;<code>Execute</code></p>
<p><img src="/Net6-WebApi-Basics-6/50bddf0717f5e1fd07ff684b3506f6bc.png" alt="Try"></p>
<p>Open SQL Server, <code>SQLSUGAR4XTEST</code> has been added.<br><img src="/Net6-WebApi-Basics-6/fd1a3b7ed8f3b7028c201b3c769fd3d6.png" alt="sql server"></p>
<h2 id="Create-Table"><a href="#Create-Table" class="headerlink" title="Create Table"></a>Create Table</h2><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> Create Table</span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;returns&gt;</span><span class="doctag">&lt;/returns&gt;</span></span></span><br><span class="line">[<span class="meta">HttpPost(<span class="string">&quot;table&quot;</span>)</span>]</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">CreateTable</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    Db.CodeFirst.InitTables(<span class="keyword">typeof</span>(UserClass));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>Setup Keys</strong></p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">UserClass</span></span><br><span class="line">&#123;</span><br><span class="line">    [<span class="meta">SugarColumn(IsIdentity = true, IsPrimaryKey = true)</span>]</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span> ID &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">string</span> UserName &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">int</span> Age &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>[SugarTable(&quot;Table_User&quot;)] </code> Set table name <code>Table_User</code>.<br><code>IsPrimaryKey</code> Set primary key.</p>
<p><img src="/Net6-WebApi-Basics-6/3bf0915b2add9b4d3a6656d266b5382a.png" alt="CreateTable"></p>
<h2 id="Edit-Table-Name"><a href="#Edit-Table-Name" class="headerlink" title="Edit Table Name"></a>Edit Table Name</h2><p>Change the <code>UserName</code> to <code>User</code>. Only modify it in the database, and the code keeps unchanged.</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[<span class="meta">SugarColumn(ColumnName = <span class="string">&quot;User&quot;</span>)</span>]</span><br><span class="line"><span class="keyword">public</span> <span class="built_in">string</span> UserName &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br></pre></td></tr></table></figure>
<h2 id="Query"><a href="#Query" class="headerlink" title="Query"></a>Query</h2><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> Get data from DB</span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line"><span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;returns&gt;</span><span class="doctag">&lt;/returns&gt;</span></span></span><br><span class="line">[<span class="meta">HttpGet(<span class="string">&quot;AllDB&quot;</span>)</span>]</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">List</span>&lt;<span class="title">UserClass</span>&gt; <span class="title">GetList</span>()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> Db.Queryable&lt;UserClass&gt;().ToList();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>In the Swagger page, you can see the data from the <code>Response body</code>.<br><img src="9af89bfa6d9d1cefee282f31bc800187.png" alt="Query" style="zoom:50%"/></p>
<p>See <a href="https://www.donet5.com/Home/Doc">SQL Sugar Details</a></p>
<p>See <a href="https://www.donet5.com/home/doc?masterId=1&typeId=1206">attribute details</a></p>
<hr>
<p><strong>Next:</strong> <a href="https://gritjz.github.io/Net6-WebApi-Basics-7/">.Net6 + WebApi Basics 7</a></p>
<p><strong>Last:</strong> <a href="https://gritjz.github.io/Net6-WebApi-Basics-5/">.Net6 + WebApi Basics 5</a></p>
<hr>
<p>Good Day<br>😎</p>

                                  </div>

                                  
                                    <div class="prev-or-next">
                                      <div class="post-foot-next">
                                        
                                          <a href="/Net6-WebApi-Basics-5/" target="_self">
                                            <i class="iconfont icon-chevronleft"></i>
                                            <span>
                                              Prev
                                            </span>
                                          </a>
                                          
                                      </div>
                                      <div class="post-attach">
                                        <span class="post-pubtime">
                                          <i class="iconfont icon-updatetime mr-10" title="Update time"></i>
                                          2023-01-10 22:27:56
                                        </span>
                                         <span class="post-categories">
                                              <i class="iconfont icon-bookmark" title="Categories"></i>
                                              
                                                <span class="span--category">
                                                  
                                                    <a href="/categories/Net/" title=".Net">
                                                      &nbsp;.Net
                                                    </a>
                                                    
                                                </span>
                                                
                                                <span class="span--category">
                                                  
                                                      <a href="/categories/Net/Net6/" title=".Net6">
                                                        &nbsp;<b>>>&nbsp;.Net6</b>
                                                      </a>
                                                      
                                                </span>
                                                
                                                <span class="span--category">
                                                  
                                                      <a href="/categories/Net/Net6/WebApi/" title="WebApi">
                                                        &nbsp;<b>>>&nbsp;WebApi</b>
                                                      </a>
                                                      
                                                </span>
                                                
                                            </span>
                                             <span class="post-tags">
                                            <i class="iconfont icon-tags mr-10" title="Tags"></i>
                                            
                                              <span class="span--tag mr-8">
                                                <b><a href="/tags/C/" title="C#" style="color:Orange"> #C#
                                                </a></b>
                                              </span>
                                              
                                              <span class="span--tag mr-8">
                                                <b><a href="/tags/Net6/" title=".Net6" style="color:Orange"> #.Net6
                                                </a></b>
                                              </span>
                                              
                                              <span class="span--tag mr-8">
                                                <b><a href="/tags/WebApi/" title="WebApi" style="color:Orange"> #WebApi
                                                </a></b>
                                              </span>
                                              
                                              <span class="span--tag mr-8">
                                                <b><a href="/tags/SqlSugar/" title="SqlSugar" style="color:Orange"> #SqlSugar
                                                </a></b>
                                              </span>
                                              
                                              <span class="span--tag mr-8">
                                                <b><a href="/tags/Database/" title="Database" style="color:Orange"> #Database
                                                </a></b>
                                              </span>
                                              
                                          </span>
                                          
                                      </div>
                                      <div class="post-foot-prev">
                                        
                                          <a href="/Net6-WebApi-Basics-7/" target="_self">
                                            <span>
                                              Next
                                            </span>
                                            <i class="iconfont icon-chevronright"></i>
                                          </a>
                                          
                                      </div>
                                    </div>
                                    
                                </div>
                                
  <div id="btn-catalog" class="btn-catalog">
    <i class="iconfont icon-catalog"></i>
  </div>
  <div class="post-catalog hidden" id="catalog">
    <div class="title">Contents</div>
    <div class="catalog-content">
      
        <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Use-SqlSugar-to-connect-with-DB"><span class="toc-text">Use SqlSugar to connect with DB</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Insall-SqlSugarCore"><span class="toc-text">Insall SqlSugarCore</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Dependency-Injection"><span class="toc-text">Dependency Injection</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#CodeFirst"><span class="toc-text">CodeFirst</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Create-Database"><span class="toc-text">Create Database</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Create-Table"><span class="toc-text">Create Table</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Edit-Table-Name"><span class="toc-text">Edit Table Name</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Query"><span class="toc-text">Query</span></a></li></ol></li></ol>
      
    </div>
  </div>

  
<script src="/js/catalog.js"></script>




                                  
                              </div>
                              
        
<div class="footer">
  <div class="social">
    <ul>
      
        <li>
          <a title="github" href="https://github.com/gritjz">
            <i class="iconfont icon-github"></i>
          </a>
        </li>
      
    </ul>
  </div>
  
    
    <div class="footer-more">
      
        <a href="https://github.com/zchengsite/hexo-theme-oranges">Copyright © 2023 Steven Zhang</a>
        
    </div>
  
    
    <div class="footer-more">
      
        <a href="https://github.com/zchengsite/hexo-theme-oranges">Theme by Oranges</a>
        
    </div>
  
  
    <div class="footer-views">
      
          <span id="busuanzi_value_site_pv"></span>
        
      
      
          <span id="busuanzi_value_site_uv"></span>
        
      
    </div>
  

  
    <script src='https://unpkg.com/mermaid@9.3.0/dist/mermaid.min.js'></script>
    <script>
      if (window.mermaid) {
        mermaid.initialize({theme: 'forest'});
      }
    </script>
  
  
</div>

 
      </div>

      

      <div class="tools-bar">
        <div class="back-to-top tools-bar-item hidden">
  <a href="javascript: void(0)">
    <i class="iconfont icon-chevronup"></i>
  </a>
</div>


<script src="/js/backtotop.js"></script>


        
  <div class="tools-bar-item theme-icon" id="switch-color-scheme">
    <a href="javascript: void(0)">
      <i id="theme-icon" class="iconfont icon-moon"></i>
    </a>
  </div>

  
<script src="/js/colorscheme.js"></script>




        
  <div class="search-icon tools-bar-item" id="search-icon">
    <a href="javascript: void(0)">
      <i class="iconfont icon-search"></i>
    </a>
  </div>

  <div class="search-overlay hidden">
    <div class="search-content" tabindex="0">
      <div class="search-title">
        <span class="search-icon-input">
          <a href="javascript: void(0)">
            <i class="iconfont icon-search"></i>
          </a>
        </span>
        
          <input type="text" class="search-input" id="search-input" placeholder="Searching...">
        
        <span class="search-close-icon" id="search-close-icon">
          <a href="javascript: void(0)">
            <i class="iconfont icon-close"></i>
          </a>
        </span>
      </div>
      <div class="search-result" id="search-result"></div>
    </div>
  </div>

  <script type="text/javascript">
    var inputArea = document.querySelector("#search-input")
    var searchOverlayArea = document.querySelector(".search-overlay")

    inputArea.onclick = function() {
      getSearchFile()
      this.onclick = null
    }

    inputArea.onkeydown = function() {
      if(event.keyCode == 13)
        return false
    }

    function openOrHideSearchContent() {
      let isHidden = searchOverlayArea.classList.contains('hidden')
      if (isHidden) {
        searchOverlayArea.classList.remove('hidden')
        document.body.classList.add('hidden')
        // inputArea.focus()
      } else {
        searchOverlayArea.classList.add('hidden')
        document.body.classList.remove('hidden')
      }
    }

    function blurSearchContent(e) {
      if (e.target === searchOverlayArea) {
        openOrHideSearchContent()
      }
    }

    document.querySelector("#search-icon").addEventListener("click", openOrHideSearchContent, false)
    document.querySelector("#search-close-icon").addEventListener("click", openOrHideSearchContent, false)
    searchOverlayArea.addEventListener("click", blurSearchContent, false)

    var searchFunc = function (path, search_id, content_id) {
      'use strict';
      var $input = document.getElementById(search_id);
      var $resultContent = document.getElementById(content_id);
      $resultContent.innerHTML = "<ul><span class='local-search-empty'>First search, index file loading, please wait...<span></ul>";
      $.ajax({
        // 0x01. load xml file
        url: path,
        dataType: "xml",
        success: function (xmlResponse) {
          // 0x02. parse xml file
          var datas = $("entry", xmlResponse).map(function () {
            return {
              title: $("title", this).text(),
              content: $("content", this).text(),
              url: $("url", this).text()
            };
          }).get();
          $resultContent.innerHTML = "";

          $input.addEventListener('input', function () {
            // 0x03. parse query to keywords list
            var str = '<ul class=\"search-result-list\">';
            var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
            $resultContent.innerHTML = "";
            if (this.value.trim().length <= 0) {
              return;
            }
            // 0x04. perform local searching
            datas.forEach(function (data) {
              var isMatch = true;
              var content_index = [];
              if (!data.title || data.title.trim() === '') {
                data.title = "Untitled";
              }
              var orig_data_title = data.title.trim();
              var data_title = orig_data_title.toLowerCase();
              var orig_data_content = data.content.trim().replace(/<[^>]+>/g, "");
              var data_content = orig_data_content.toLowerCase();
              var data_url = data.url;
              var index_title = -1;
              var index_content = -1;
              var first_occur = -1;
              // only match artiles with not empty contents
              if (data_content !== '') {
                keywords.forEach(function (keyword, i) {
                  index_title = data_title.indexOf(keyword);
                  index_content = data_content.indexOf(keyword);

                  if (index_title < 0 && index_content < 0) {
                    isMatch = false;
                  } else {
                    if (index_content < 0) {
                      index_content = 0;
                    }
                    if (i == 0) {
                      first_occur = index_content;
                    }
                    // content_index.push({index_content:index_content, keyword_len:keyword_len});
                  }
                });
              } else {
                isMatch = false;
              }
              // 0x05. show search results
              if (isMatch) {
                str += "<li><a href='" + data_url + "' class='search-result-title'>" + orig_data_title + "</a>";
                var content = orig_data_content;
                if (first_occur >= 0) {
                  // cut out 100 characters
                  var start = first_occur - 20;
                  var end = first_occur + 80;

                  if (start < 0) {
                    start = 0;
                  }

                  if (start == 0) {
                    end = 100;
                  }

                  if (end > content.length) {
                    end = content.length;
                  }

                  var match_content = content.substr(start, end);

                  // highlight all keywords
                  keywords.forEach(function (keyword) {
                    var regS = new RegExp(keyword, "gi");
                    match_content = match_content.replace(regS, "<span class=\"search-keyword\">" + keyword + "</span>");
                  });

                  str += "<p class=\"search-result-abstract\">" + match_content + "...</p>"
                }
                str += "</li>";
              }
            });
            str += "</ul>";
            if (str.indexOf('<li>') === -1) {
              return $resultContent.innerHTML = "<ul><span class='local-search-empty'>No result<span></ul>";
            }
            $resultContent.innerHTML = str;
          });
        },
        error: function(xhr, status, error) {
          $resultContent.innerHTML = ""
          if (xhr.status === 404) {
            $resultContent.innerHTML = "<ul><span class='local-search-empty'>The search.xml file was not found, please refer to：<a href='https://github.com/zchengsite/hexo-theme-oranges#configuration' target='_black'>configuration</a><span></ul>";
          } else {
            $resultContent.innerHTML = "<ul><span class='local-search-empty'>The request failed, Try to refresh the page or try again later.<span></ul>";
          }
        }
      });
      $(document).on('click', '#search-close-icon', function() {
        $('#search-input').val('');
        $('#search-result').html('');
      });
    }

    var getSearchFile = function() {
        var path = "/search.xml";
        searchFunc(path, 'search-input', 'search-result');
    }
  </script>



        
  
    <div class="share-icon tools-bar-item">
      <a href="javascript: void(0)" id="share-icon">
        <i class="iconfont iconshare"></i>
      </a>
      <div class="share-content hidden">
        
          <a class="share-item" href="https://twitter.com/intent/tweet?text=' + .Net%206%20%2B%20WebApi%20Basics%206%20-%20Database + '&url=' + http%3A%2F%2Fexample.com%2FNet6-WebApi-Basics-6%2F + '" target="_blank" title="Twitter">
            <i class="iconfont icon-twitter"></i>
          </a>
        
        
          <a class="share-item" href="https://www.facebook.com/sharer.php?u=http://example.com/Net6-WebApi-Basics-6/" target="_blank" title="Facebook">
            <i class="iconfont icon-facebooksquare"></i>
          </a>
        
      </div>
    </div>
  
  
<script src="/js/shares.js"></script>



      </div>
    </div>
  </body>
</html>
